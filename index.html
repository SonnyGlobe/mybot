<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>SonnyBot Chat</title><link href="style.css" rel="stylesheet"/><style> html, body { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; /* prevent outer scrollbars */ } body { font-family: Arial, sans-serif; display: flex; flex-direction: column; height: 100dvh; /* dynamic viewport height for mobile */ width: 100%; background: #f5f5f5; } header { background: #2574cf; color: #fff; padding: 15px; text-align: center; font-size: 1.2rem; flex-shrink: 0; width: 100%; } #chat-container { flex: 1; overflow-y: auto; /* scrollbar appears only when needed */ overflow-x: hidden; padding: 10px; display: flex; flex-direction: column; width: 100%; box-sizing: border-box; scroll-behavior: smooth; } .message { max-width: 80%; margin: 5px 0; padding: 10px; border-radius: 15px; line-height: 1.4; word-wrap: break-word; font-size: 1rem; white-space: pre-wrap; /* ‚úÖ keeps line breaks and spacing */ } .user { align-self: flex-end; background: #cadcf0; color: #000000; border-bottom-right-radius: 0; } .bot { align-self: flex-start; background: #eeeed3; color: #333; border-bottom-left-radius: 0; } #input-bar { display: flex; padding: 10px; background: #fff; border-top: 1px solid #ccc; width: 100%; box-sizing: border-box; flex-shrink: 0; } #user-input { flex: 1; padding: 10px; font-size: 1rem; border: 1px solid #ccc; border-radius: 5px; } #send-btn { padding: 10px 15px; margin-left: 10px; font-size: 1rem; background: #2574cf; color: #fff; border: none; border-radius: 5px; cursor: pointer; } #send-btn:disabled { background: #78a8df; } /* Add minimal styling for speak button */ .speak-btn { background: none; border: none; color: #0078ff; cursor: pointer; margin-left: 8px; font-size: 1.2em; } .speak-btn:hover { color: #0044cc; } #voice-select { margin: 8px; } #stop-tts-btn { margin-left: 8px; cursor: pointer; font-size: 0.9em; padding: 3px 8px; border: 1px solid #0078ff; background: #f5f5f5; color: #0078ff; border-radius: 4px; } #stop-tts-btn:hover { background: #0078ff; color: #fff; } </style></head><body><header>&#129302;&#32;&#83;&#111;&#110;&#110;&#121;&#66;&#111;&#116;</header><div style="display: flex; align-items: center; gap: 5px; background: #d8ecf7;"><label for="voice-select">&#67;&#104;&#111;&#111;&#115;&#101;&#32;&#86;&#111;&#105;&#99;&#101;&#58;</label><select id="voice-select"></select><button id="stop-tts-btn">&#83;&#116;&#111;&#112;&#32;&#84;&#97;&#108;&#107;&#105;&#110;&#103;</button></div><div id="chat-container"></div><div id="input-bar"><input id="user-input" placeholder="Type your message..." type="text"/><button id="send-btn">&#83;&#101;&#110;&#100;</button></div><script>const a0_0x18e1af=a0_0x5101;(function(_0x207971,_0x476ae2){const _0x36ecdc=a0_0x5101,_0xf36e6b=_0x207971();while(!![]){try{const _0x43347b=parseInt(_0x36ecdc(0x18d))/0x1*(parseInt(_0x36ecdc(0x18e))/0x2)+parseInt(_0x36ecdc(0x18f))/0x3*(-parseInt(_0x36ecdc(0x1a4))/0x4)+parseInt(_0x36ecdc(0x1a1))/0x5+parseInt(_0x36ecdc(0x17f))/0x6+-parseInt(_0x36ecdc(0x1b5))/0x7+-parseInt(_0x36ecdc(0x188))/0x8*(parseInt(_0x36ecdc(0x16d))/0x9)+-parseInt(_0x36ecdc(0x1b4))/0xa*(-parseInt(_0x36ecdc(0x19e))/0xb);if(_0x43347b===_0x476ae2)break;else _0xf36e6b['push'](_0xf36e6b['shift']());}catch(_0xbd1d10){_0xf36e6b['push'](_0xf36e6b['shift']());}}}(a0_0x3b7b,0x24b8f));const a0_0x351786=document[a0_0x18e1af(0x17c)](a0_0x18e1af(0x1ad)),a0_0x55c898=document['getElementById'](a0_0x18e1af(0x199)),a0_0x4aeaa7=document['getElementById'](a0_0x18e1af(0x1b1)),a0_0x57e700=document[a0_0x18e1af(0x17c)](a0_0x18e1af(0x1a8)),a0_0x409785=document['getElementById'](a0_0x18e1af(0x169)),a0_0x26b722=a0_0x18e1af(0x16a);let a0_0x52527d=JSON[a0_0x18e1af(0x1b0)](localStorage[a0_0x18e1af(0x19f)](a0_0x26b722)||'[]'),a0_0xa7efd5=window[a0_0x18e1af(0x170)],a0_0x5df4d2=![],a0_0x22d0e5=[],a0_0x3a90ad=null;function a0_0x3b7b(){const _0xf7c94a=['chat-container','span','POST','parse','send-btn','apply','createElement','10WNGGon','481327CyFCON','innerHTML','application/json','I\x20couldn\x27t\x20find\x20that\x20previous\x20question\x20in\x20this\x20session.','stop-tts-btn','sonnybot_conversation_v1','addEventListener','cors','78363zcqyId','reply','cancel','speechSynthesis','bot','scrollTop','type','scrollHeight','getVoices','classList','message','user','className','onclick','click','getElementById','filter','value','825558ObQiOU','stringify','setItem','map','load','status','length','response','\x20‚Äî\x20default','136nsAwua','assistant','option','forEach','div','731RWZqyv','38YjdvlW','6VAuZad','appendChild','role','include','nth','toString','statusText','json','previous','lang','user-input','error','speak','‚ö†Ô∏è\x20Error\x20contacting\x20server','‚ö†Ô∏è\x20Server\x20error\x20','876722rzKlNW','getItem','Your\x20previous\x20question:\x20\x22','1143315HOcsRk','push','content','185304KFQBCp','test','disabled','button','voice-select','keypress','textContent','Speak\x20this\x20reply','add'];a0_0x3b7b=function(){return _0xf7c94a;};return a0_0x3b7b();}function a0_0x25caa2(){const _0x1a6d99=a0_0x18e1af;a0_0x22d0e5=a0_0xa7efd5[_0x1a6d99(0x175)]();if(!a0_0x22d0e5||a0_0x22d0e5[_0x1a6d99(0x185)]===0x0)return;a0_0x57e700[_0x1a6d99(0x1b6)]='',a0_0x22d0e5[_0x1a6d99(0x18b)]((_0x5c31bc,_0x1ec9a5)=>{const _0x2c40e8=_0x1a6d99,_0x1faade=document[_0x2c40e8(0x1b3)](_0x2c40e8(0x18a));_0x1faade[_0x2c40e8(0x17e)]=_0x1ec9a5,_0x1faade[_0x2c40e8(0x1aa)]=_0x5c31bc['name']+'\x20('+_0x5c31bc['lang']+')'+(_0x5c31bc['default']?_0x2c40e8(0x187):''),a0_0x57e700[_0x2c40e8(0x190)](_0x1faade);}),!a0_0x3a90ad&&(a0_0x3a90ad=a0_0x22d0e5[0x0],a0_0x57e700['value']=0x0);}a0_0xa7efd5['onvoiceschanged']=a0_0x25caa2,window[a0_0x18e1af(0x16b)]('load',a0_0x25caa2),a0_0x57e700[a0_0x18e1af(0x16b)]('change',()=>{const _0x5a16c6=parseInt(a0_0x57e700['value'],0xa);if(!isNaN(_0x5a16c6)&&a0_0x22d0e5[_0x5a16c6])a0_0x3a90ad=a0_0x22d0e5[_0x5a16c6];});function a0_0x2ed4fb(_0x551f1d=!![]){const _0x4b15a2=a0_0x18e1af,_0x3a2e89=(function(){let _0x44c1f9=!![];return function(_0x2988c6,_0x112837){const _0x13bda7=_0x44c1f9?function(){const _0x473550=a0_0x5101;if(_0x112837){const _0x32938d=_0x112837[_0x473550(0x1b2)](_0x2988c6,arguments);return _0x112837=null,_0x32938d;}}:function(){};return _0x44c1f9=![],_0x13bda7;};}()),_0x2e57c6=_0x3a2e89(this,function(){const _0x413127=a0_0x5101;return _0x2e57c6[_0x413127(0x194)]()['search']('(((.+)+)+)+$')[_0x413127(0x194)]()['constructor'](_0x2e57c6)['search']('(((.+)+)+)+$');});_0x2e57c6();if(!a0_0xa7efd5||!a0_0xa7efd5['speaking'])return;if(_0x551f1d){let _0x40fab8=0x5,_0x3affaa=0x32,_0x221a9d=0x0;const _0xe3a67b=setInterval(()=>{const _0x3562e8=a0_0x5101;(!a0_0xa7efd5['speaking']||_0x221a9d>=_0x40fab8)&&(a0_0xa7efd5[_0x3562e8(0x16f)](),a0_0x5df4d2=![],clearInterval(_0xe3a67b)),_0x221a9d++;},_0x3affaa);}else a0_0xa7efd5[_0x4b15a2(0x16f)](),a0_0x5df4d2=![];}a0_0x409785[a0_0x18e1af(0x16b)]('click',()=>a0_0x2ed4fb(![]));function a0_0x102983(_0x2ffbbb){const _0x6f41ba=a0_0x18e1af;if(!a0_0xa7efd5||!a0_0x3a90ad)return;a0_0x2ed4fb();const _0x5a8802=new SpeechSynthesisUtterance(_0x2ffbbb);_0x5a8802['voice']=a0_0x3a90ad,_0x5a8802['rate']=0x1,_0x5a8802['pitch']=0x1,_0x5a8802[_0x6f41ba(0x198)]=a0_0x3a90ad[_0x6f41ba(0x198)],a0_0x5df4d2=!![],_0x5a8802['onend']=()=>a0_0x5df4d2=![],a0_0xa7efd5[_0x6f41ba(0x19b)](_0x5a8802);}window[a0_0x18e1af(0x16b)](a0_0x18e1af(0x183),()=>{const _0x375e5d=a0_0x18e1af;a0_0x52527d[_0x375e5d(0x18b)](_0x31d1a0=>a0_0x5ef04e(_0x31d1a0['content'],_0x31d1a0['role']===_0x375e5d(0x178)?_0x375e5d(0x178):_0x375e5d(0x171),![])),a0_0x351786[_0x375e5d(0x172)]=a0_0x351786[_0x375e5d(0x174)];}),a0_0x4aeaa7[a0_0x18e1af(0x16b)](a0_0x18e1af(0x17b),a0_0x27476c),a0_0x55c898[a0_0x18e1af(0x16b)](a0_0x18e1af(0x1a9),_0x35c18c=>{if(_0x35c18c['key']==='Enter')a0_0x27476c();});function a0_0x5ef04e(_0x36f0bb,_0x179a87,_0x4d8dfb=!![]){const _0x4dd095=a0_0x18e1af,_0x1528de=document[_0x4dd095(0x1b3)](_0x4dd095(0x18c));_0x1528de[_0x4dd095(0x176)][_0x4dd095(0x1ac)](_0x4dd095(0x177),_0x179a87);const _0x477605=document[_0x4dd095(0x1b3)](_0x4dd095(0x1ae));_0x477605['textContent']=_0x36f0bb,_0x1528de[_0x4dd095(0x190)](_0x477605);if(_0x179a87==='bot'){const _0x307388=document['createElement'](_0x4dd095(0x1a7));_0x307388[_0x4dd095(0x179)]='speak-btn',_0x307388['textContent']='üîä',_0x307388['title']=_0x4dd095(0x1ab),_0x307388[_0x4dd095(0x17a)]=()=>a0_0x102983(_0x36f0bb),_0x1528de[_0x4dd095(0x190)](_0x307388);if(a0_0x3a90ad)a0_0x102983(_0x36f0bb);}a0_0x351786[_0x4dd095(0x190)](_0x1528de);if(_0x4d8dfb)a0_0x351786[_0x4dd095(0x172)]=a0_0x351786['scrollHeight'];}function a0_0x5d9445(_0x19b1d7,_0x3037ef){const _0x3e6c1f=a0_0x18e1af;a0_0x52527d[_0x3e6c1f(0x1a2)]({'role':_0x19b1d7,'content':_0x3037ef}),localStorage[_0x3e6c1f(0x181)](a0_0x26b722,JSON[_0x3e6c1f(0x180)](a0_0x52527d));}function a0_0x5101(_0x26ff35,_0x38d455){const _0x57b8d0=a0_0x3b7b();return a0_0x5101=function(_0x37f51a,_0xff8ab0){_0x37f51a=_0x37f51a-0x168;let _0x3b7b66=_0x57b8d0[_0x37f51a];return _0x3b7b66;},a0_0x5101(_0x26ff35,_0x38d455);}function a0_0x281a4b(_0x312ff9){const _0x11e723=a0_0x18e1af;if(/(previous|last).*(question|q\b)|what(?:'s| is) my previous question|what was my previous question|what is my last question/[_0x11e723(0x1a5)](_0x312ff9))return{'type':_0x11e723(0x197)};const _0x2449fb=_0x312ff9['match'](/(?:what(?:'s| is| was)?\s+(?:my\s+)?)?(?:question(?:\s*(?:number\s*)?)|q)\s*(?:#?\s*)?(\d+)/);if(_0x2449fb&&_0x2449fb[0x1]){const _0x3380ba=parseInt(_0x2449fb[0x1],0xa);if(!isNaN(_0x3380ba)&&_0x3380ba>=0x1)return{'type':_0x11e723(0x193),'n':_0x3380ba};}if(/what(?:'s| is) my last message/['test'](_0x312ff9))return{'type':'previous'};return null;}function a0_0x25aff5(){const _0xbb4888=a0_0x18e1af;return a0_0x52527d[_0xbb4888(0x17d)](_0x4cc9f0=>_0x4cc9f0[_0xbb4888(0x191)]===_0xbb4888(0x178))['map'](_0x3b4f0c=>_0x3b4f0c['content']);}function a0_0x29bf29(_0x4d19ca){const _0x5e1b99=a0_0x18e1af,_0xe9dd4d=a0_0x25aff5();if(_0x4d19ca[_0x5e1b99(0x173)]===_0x5e1b99(0x197)){if(_0xe9dd4d[_0x5e1b99(0x185)]>=0x2)return _0xe9dd4d[_0xe9dd4d['length']-0x2]||null;else return null;}else{if(_0x4d19ca['type']===_0x5e1b99(0x193)){const _0x23410a=_0x4d19ca['n']-0x1;if(_0x23410a>=0x0&&_0x23410a<_0xe9dd4d[_0x5e1b99(0x185)])return _0xe9dd4d[_0x23410a];return null;}}return null;}async function a0_0x27476c(){const _0x392a8d=a0_0x18e1af,_0x2fcad7=a0_0x55c898[_0x392a8d(0x17e)]['trim']();if(!_0x2fcad7)return;a0_0x5ef04e(_0x2fcad7,'user'),a0_0x5d9445(_0x392a8d(0x178),_0x2fcad7),a0_0x55c898[_0x392a8d(0x17e)]='',a0_0x4aeaa7['disabled']=!![],a0_0x2ed4fb();try{const _0x5db33f=_0x2fcad7['toLowerCase'](),_0x655e95=a0_0x281a4b(_0x5db33f);if(_0x655e95){const _0x351c6f=a0_0x29bf29(_0x655e95),_0x406c36=_0x351c6f?_0x392a8d(0x1a0)+_0x351c6f+'\x22':_0x392a8d(0x168);a0_0x5ef04e(_0x406c36,_0x392a8d(0x171)),a0_0x5d9445(_0x392a8d(0x189),_0x406c36),a0_0x4aeaa7[_0x392a8d(0x1a6)]=![];return;}const _0x42e6f0=a0_0x52527d[_0x392a8d(0x182)](_0x869651=>{const _0x303377=_0x392a8d;return{'role':_0x869651[_0x303377(0x191)]===_0x303377(0x178)?_0x303377(0x178):_0x303377(0x189),'content':_0x869651[_0x303377(0x1a3)]};}),_0x58d7d6='https://enormous-sunbird-abnormally.ngrok-free.app',_0x137636=await fetch(_0x58d7d6+'/api/chat',{'method':_0x392a8d(0x1af),'mode':_0x392a8d(0x16c),'credentials':_0x392a8d(0x192),'headers':{'Content-Type':_0x392a8d(0x1b7)},'body':JSON['stringify']({'conversation':_0x42e6f0,'message':_0x2fcad7})});if(!_0x137636['ok']){let _0x41df3a;try{_0x41df3a=await _0x137636['text']();}catch(_0x35408e){_0x41df3a=_0x137636[_0x392a8d(0x195)];}a0_0x5ef04e('‚ö†Ô∏è\x20Server\x20error\x20'+_0x137636[_0x392a8d(0x184)]+':\x20'+_0x41df3a,_0x392a8d(0x171)),a0_0x5d9445('assistant',_0x392a8d(0x19d)+_0x137636['status']+':\x20'+_0x41df3a),a0_0x4aeaa7['disabled']=![];return;}const _0x554469=await _0x137636[_0x392a8d(0x196)](),_0x5d6d13=_0x554469&&(_0x554469[_0x392a8d(0x16e)]||_0x554469[_0x392a8d(0x186)]||_0x554469['answer'])||'(No\x20response)';a0_0x5ef04e(_0x5d6d13,_0x392a8d(0x171)),a0_0x5d9445(_0x392a8d(0x189),_0x5d6d13);}catch(_0xaf4068){console[_0x392a8d(0x19a)](_0xaf4068),a0_0x5ef04e('‚ö†Ô∏è\x20Error\x20contacting\x20server',_0x392a8d(0x171)),a0_0x5d9445(_0x392a8d(0x189),_0x392a8d(0x19c));}finally{a0_0x4aeaa7[_0x392a8d(0x1a6)]=![];}}</script></body></html>
