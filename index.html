<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>SonnyBot Chat</title><link href="style.css" rel="stylesheet"/><style> html, body { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; /* prevent outer scrollbars */ } body { font-family: Arial, sans-serif; display: flex; flex-direction: column; height: 100dvh; /* dynamic viewport height for mobile */ width: 100%; background: #f5f5f5; } header { background: #2574cf; color: #fff; padding: 15px; text-align: center; font-size: 1.2rem; flex-shrink: 0; width: 100%; } #chat-container { flex: 1; overflow-y: auto; /* scrollbar appears only when needed */ overflow-x: hidden; padding: 10px; display: flex; flex-direction: column; width: 100%; box-sizing: border-box; scroll-behavior: smooth; } .message { max-width: 80%; margin: 5px 0; padding: 10px; border-radius: 15px; line-height: 1.4; word-wrap: break-word; font-size: 1rem; white-space: pre-wrap; /* ✅ keeps line breaks and spacing */ } .user { align-self: flex-end; background: #cadcf0; color: #000000; border-bottom-right-radius: 0; } .bot { align-self: flex-start; background: #eeeed3; color: #333; border-bottom-left-radius: 0; } #input-bar { display: flex; padding: 10px; background: #fff; border-top: 1px solid #ccc; width: 100%; box-sizing: border-box; flex-shrink: 0; } #user-input { flex: 1; padding: 10px; font-size: 1rem; border: 1px solid #ccc; border-radius: 5px; } #send-btn { padding: 10px 15px; margin-left: 10px; font-size: 1rem; background: #2574cf; color: #fff; border: none; border-radius: 5px; cursor: pointer; } #send-btn:disabled { background: #78a8df; } /* Add minimal styling for speak button */ .speak-btn { background: none; border: none; color: #0078ff; cursor: pointer; margin-left: 8px; font-size: 1.2em; } .speak-btn:hover { color: #0044cc; } #voice-select { margin: 8px; } #stop-tts-btn { margin-left: 8px; cursor: pointer; font-size: 0.9em; padding: 3px 8px; border: 1px solid #0078ff; background: #f5f5f5; color: #0078ff; border-radius: 4px; } #stop-tts-btn:hover { background: #0078ff; color: #fff; } </style></head><body><header>&#129302;&#32;&#83;&#111;&#110;&#110;&#121;&#66;&#111;&#116;</header><div style="display: flex; align-items: center; gap: 5px; background: #d8ecf7;"><label for="voice-select">&#67;&#104;&#111;&#111;&#115;&#101;&#32;&#86;&#111;&#105;&#99;&#101;&#58;</label><select id="voice-select"></select><button id="stop-tts-btn">&#83;&#116;&#111;&#112;&#32;&#84;&#84;&#83;</button></div><div id="chat-container"></div><div id="input-bar"><input id="user-input" placeholder="Type your message..." type="text"/><button id="send-btn">&#83;&#101;&#110;&#100;</button></div><script>const a0_0x5fe59f=a0_0x6ee9;(function(_0x5beaca,_0x4cc7c7){const _0xa46acd=a0_0x6ee9,_0x5b7a3d=_0x5beaca();while(!![]){try{const _0x1cbe48=-parseInt(_0xa46acd(0x1ae))/0x1*(parseInt(_0xa46acd(0x1a7))/0x2)+parseInt(_0xa46acd(0x1a1))/0x3*(parseInt(_0xa46acd(0x1a4))/0x4)+parseInt(_0xa46acd(0x1b5))/0x5+-parseInt(_0xa46acd(0x19a))/0x6*(-parseInt(_0xa46acd(0x197))/0x7)+parseInt(_0xa46acd(0x1b0))/0x8+-parseInt(_0xa46acd(0x1c9))/0x9+-parseInt(_0xa46acd(0x1ce))/0xa;if(_0x1cbe48===_0x4cc7c7)break;else _0x5b7a3d['push'](_0x5b7a3d['shift']());}catch(_0x1cc62f){_0x5b7a3d['push'](_0x5b7a3d['shift']());}}}(a0_0x3a4b,0x8c986));const a0_0x48636a=document[a0_0x5fe59f(0x1a0)]('chat-container'),a0_0x2b74db=document['getElementById'](a0_0x5fe59f(0x1a9)),a0_0x5af858=document[a0_0x5fe59f(0x1a0)]('send-btn'),a0_0x536735=document[a0_0x5fe59f(0x1a0)](a0_0x5fe59f(0x1d5)),a0_0x25a70f=document[a0_0x5fe59f(0x1a0)](a0_0x5fe59f(0x1cc)),a0_0x55eb20='sonnybot_conversation_v1';let a0_0x3b7471=JSON['parse'](localStorage[a0_0x5fe59f(0x198)](a0_0x55eb20)||'[]'),a0_0x5b97cb=window['speechSynthesis'],a0_0x34af1f=![],a0_0x1c9fee=[],a0_0x56e4b0=null;function a0_0xd35530(){const _0x5c1c71=a0_0x5fe59f;a0_0x1c9fee=a0_0x5b97cb['getVoices']();if(!a0_0x1c9fee||a0_0x1c9fee[_0x5c1c71(0x19e)]===0x0)return;a0_0x536735[_0x5c1c71(0x1ac)]='',a0_0x1c9fee['forEach']((_0x1d62b7,_0x573b63)=>{const _0x275bd2=_0x5c1c71,_0x3c008b=document[_0x275bd2(0x1ad)]('option');_0x3c008b[_0x275bd2(0x1ab)]=_0x573b63,_0x3c008b[_0x275bd2(0x1d2)]=_0x1d62b7['name']+'\x20('+_0x1d62b7['lang']+')'+(_0x1d62b7[_0x275bd2(0x1a2)]?_0x275bd2(0x1c1):''),a0_0x536735['appendChild'](_0x3c008b);}),!a0_0x56e4b0&&(a0_0x56e4b0=a0_0x1c9fee[0x0],a0_0x536735[_0x5c1c71(0x1ab)]=0x0);}a0_0x5b97cb['onvoiceschanged']=a0_0xd35530,window[a0_0x5fe59f(0x1bd)](a0_0x5fe59f(0x1c8),a0_0xd35530),a0_0x536735['addEventListener']('change',()=>{const _0x50df9b=a0_0x5fe59f,_0x4f161f=parseInt(a0_0x536735[_0x50df9b(0x1ab)],0xa);if(!isNaN(_0x4f161f)&&a0_0x1c9fee[_0x4f161f])a0_0x56e4b0=a0_0x1c9fee[_0x4f161f];});function a0_0x2d4946(_0x2fc8fa=!![]){const _0x44ed45=a0_0x5fe59f,_0x42737a=(function(){let _0x2ee47c=!![];return function(_0xcab2a,_0x46e3f7){const _0x54f567=_0x2ee47c?function(){const _0x217faf=a0_0x6ee9;if(_0x46e3f7){const _0x18c2f1=_0x46e3f7[_0x217faf(0x1b3)](_0xcab2a,arguments);return _0x46e3f7=null,_0x18c2f1;}}:function(){};return _0x2ee47c=![],_0x54f567;};}()),_0x35cda6=_0x42737a(this,function(){const _0x59bee4=a0_0x6ee9;return _0x35cda6['toString']()[_0x59bee4(0x19b)]('(((.+)+)+)+$')[_0x59bee4(0x1a6)]()[_0x59bee4(0x1b4)](_0x35cda6)[_0x59bee4(0x19b)](_0x59bee4(0x1ca));});_0x35cda6();if(!a0_0x5b97cb||!a0_0x5b97cb[_0x44ed45(0x1d9)])return;if(_0x2fc8fa){let _0x18b4db=0x5,_0x45508a=0x32,_0x5e7d6f=0x0;const _0xda197a=setInterval(()=>{const _0x478096=_0x44ed45;(!a0_0x5b97cb[_0x478096(0x1d9)]||_0x5e7d6f>=_0x18b4db)&&(a0_0x5b97cb[_0x478096(0x1c2)](),a0_0x34af1f=![],clearInterval(_0xda197a)),_0x5e7d6f++;},_0x45508a);}else a0_0x5b97cb[_0x44ed45(0x1c2)](),a0_0x34af1f=![];}a0_0x25a70f[a0_0x5fe59f(0x1bd)]('click',()=>a0_0x2d4946(![]));function a0_0x496693(_0x4d2951){const _0x29d163=a0_0x5fe59f;if(!a0_0x5b97cb||!a0_0x56e4b0)return;a0_0x2d4946();const _0x35804c=new SpeechSynthesisUtterance(_0x4d2951);_0x35804c['voice']=a0_0x56e4b0,_0x35804c[_0x29d163(0x19c)]=0x1,_0x35804c[_0x29d163(0x1b6)]=0x1,_0x35804c[_0x29d163(0x1d0)]=a0_0x56e4b0[_0x29d163(0x1d0)],a0_0x34af1f=!![],_0x35804c['onend']=()=>a0_0x34af1f=![],a0_0x5b97cb[_0x29d163(0x1c7)](_0x35804c);}function a0_0x3a4b(){const _0x55a98b=['2wEAoJm','user','user-input','message','value','innerHTML','createElement','539407cpKIQH','POST','6942496hUZarD','push','content','apply','constructor','1922660eVdpUn','pitch','I\x20couldn\x27t\x20find\x20that\x20previous\x20question\x20in\x20this\x20session.','classList','⚠️\x20Error\x20contacting\x20server','include','Speak\x20this\x20reply','nth','addEventListener','div','title','setItem','\x20—\x20default','cancel','button','statusText','filter','cors','speak','load','3298986WuvruP','(((.+)+)+)+$','appendChild','stop-tts-btn','map','8199310AsZTZh','speak-btn','lang','disabled','textContent','scrollTop','stringify','voice-select','Your\x20previous\x20question:\x20\x22','(No\x20response)','key','speaking','className','answer','/api/chat','scrollHeight','https://enormous-sunbird-abnormally.ngrok-free.app','role','match','previous','response','click','bot','onclick','217ZBKJCV','getItem','type','119940VwzjSn','search','rate','test','length','reply','getElementById','6SiIILb','default','assistant','859472sALEKj','⚠️\x20Server\x20error\x20','toString'];a0_0x3a4b=function(){return _0x55a98b;};return a0_0x3a4b();}window[a0_0x5fe59f(0x1bd)](a0_0x5fe59f(0x1c8),()=>{const _0x3ce150=a0_0x5fe59f;a0_0x3b7471['forEach'](_0x430083=>a0_0x12bab7(_0x430083[_0x3ce150(0x1b2)],_0x430083['role']===_0x3ce150(0x1a8)?_0x3ce150(0x1a8):_0x3ce150(0x195),![])),a0_0x48636a[_0x3ce150(0x1d3)]=a0_0x48636a[_0x3ce150(0x1dd)];}),a0_0x5af858[a0_0x5fe59f(0x1bd)](a0_0x5fe59f(0x194),a0_0x1d8331),a0_0x2b74db[a0_0x5fe59f(0x1bd)]('keypress',_0xd85707=>{const _0x3e64f3=a0_0x5fe59f;if(_0xd85707[_0x3e64f3(0x1d8)]==='Enter')a0_0x1d8331();});function a0_0x12bab7(_0x44d115,_0x20e994,_0x4687df=!![]){const _0x153d7c=a0_0x5fe59f,_0xb0525d=document[_0x153d7c(0x1ad)](_0x153d7c(0x1be));_0xb0525d[_0x153d7c(0x1b8)]['add'](_0x153d7c(0x1aa),_0x20e994);const _0x1098a2=document[_0x153d7c(0x1ad)]('span');_0x1098a2[_0x153d7c(0x1d2)]=_0x44d115,_0xb0525d[_0x153d7c(0x1cb)](_0x1098a2);if(_0x20e994===_0x153d7c(0x195)){const _0x580232=document[_0x153d7c(0x1ad)](_0x153d7c(0x1c3));_0x580232[_0x153d7c(0x1da)]=_0x153d7c(0x1cf),_0x580232[_0x153d7c(0x1d2)]='🔊',_0x580232[_0x153d7c(0x1bf)]=_0x153d7c(0x1bb),_0x580232[_0x153d7c(0x196)]=()=>a0_0x496693(_0x44d115),_0xb0525d[_0x153d7c(0x1cb)](_0x580232);if(a0_0x56e4b0)a0_0x496693(_0x44d115);}a0_0x48636a[_0x153d7c(0x1cb)](_0xb0525d);if(_0x4687df)a0_0x48636a['scrollTop']=a0_0x48636a['scrollHeight'];}function a0_0x6ee9(_0xf2727a,_0x2ac784){const _0x4f7fd6=a0_0x3a4b();return a0_0x6ee9=function(_0x539e7c,_0x48c81e){_0x539e7c=_0x539e7c-0x191;let _0x3a4ba2=_0x4f7fd6[_0x539e7c];return _0x3a4ba2;},a0_0x6ee9(_0xf2727a,_0x2ac784);}function a0_0x10795c(_0x47fa8,_0x4d188f){const _0x1ecaba=a0_0x5fe59f;a0_0x3b7471[_0x1ecaba(0x1b1)]({'role':_0x47fa8,'content':_0x4d188f}),localStorage[_0x1ecaba(0x1c0)](a0_0x55eb20,JSON[_0x1ecaba(0x1d4)](a0_0x3b7471));}function a0_0x1cf59f(_0x49eb65){const _0x27eb32=a0_0x5fe59f;if(/(previous|last).*(question|q\b)|what(?:'s| is) my previous question|what was my previous question|what is my last question/[_0x27eb32(0x19d)](_0x49eb65))return{'type':_0x27eb32(0x192)};const _0x30a350=_0x49eb65[_0x27eb32(0x191)](/(?:what(?:'s| is| was)?\s+(?:my\s+)?)?(?:question(?:\s*(?:number\s*)?)|q)\s*(?:#?\s*)?(\d+)/);if(_0x30a350&&_0x30a350[0x1]){const _0x30f79f=parseInt(_0x30a350[0x1],0xa);if(!isNaN(_0x30f79f)&&_0x30f79f>=0x1)return{'type':_0x27eb32(0x1bc),'n':_0x30f79f};}if(/what(?:'s| is) my last message/[_0x27eb32(0x19d)](_0x49eb65))return{'type':_0x27eb32(0x192)};return null;}function a0_0x2dbd82(){const _0x3ee8a9=a0_0x5fe59f;return a0_0x3b7471[_0x3ee8a9(0x1c5)](_0x6ecc17=>_0x6ecc17[_0x3ee8a9(0x1df)]===_0x3ee8a9(0x1a8))[_0x3ee8a9(0x1cd)](_0x11e40d=>_0x11e40d['content']);}function a0_0x209bfa(_0x3b8bdf){const _0x74486e=a0_0x5fe59f,_0x1f368d=a0_0x2dbd82();if(_0x3b8bdf[_0x74486e(0x199)]===_0x74486e(0x192)){if(_0x1f368d[_0x74486e(0x19e)]>=0x2)return _0x1f368d[_0x1f368d[_0x74486e(0x19e)]-0x2]||null;else return null;}else{if(_0x3b8bdf[_0x74486e(0x199)]===_0x74486e(0x1bc)){const _0x169206=_0x3b8bdf['n']-0x1;if(_0x169206>=0x0&&_0x169206<_0x1f368d['length'])return _0x1f368d[_0x169206];return null;}}return null;}async function a0_0x1d8331(){const _0x4199e6=a0_0x5fe59f,_0x3bee30=a0_0x2b74db[_0x4199e6(0x1ab)]['trim']();if(!_0x3bee30)return;a0_0x12bab7(_0x3bee30,_0x4199e6(0x1a8)),a0_0x10795c('user',_0x3bee30),a0_0x2b74db[_0x4199e6(0x1ab)]='',a0_0x5af858[_0x4199e6(0x1d1)]=!![],a0_0x2d4946();try{const _0x330be1=_0x3bee30['toLowerCase'](),_0x20afcc=a0_0x1cf59f(_0x330be1);if(_0x20afcc){const _0x5dcc9e=a0_0x209bfa(_0x20afcc),_0x5c55ce=_0x5dcc9e?_0x4199e6(0x1d6)+_0x5dcc9e+'\x22':_0x4199e6(0x1b7);a0_0x12bab7(_0x5c55ce,_0x4199e6(0x195)),a0_0x10795c(_0x4199e6(0x1a3),_0x5c55ce),a0_0x5af858[_0x4199e6(0x1d1)]=![];return;}const _0x4690e1=a0_0x3b7471[_0x4199e6(0x1cd)](_0x5a9b6c=>{const _0x4cfedb=_0x4199e6;return{'role':_0x5a9b6c['role']===_0x4cfedb(0x1a8)?_0x4cfedb(0x1a8):_0x4cfedb(0x1a3),'content':_0x5a9b6c[_0x4cfedb(0x1b2)]};}),_0x3d9f9c=_0x4199e6(0x1de),_0x240a40=await fetch(_0x3d9f9c+_0x4199e6(0x1dc),{'method':_0x4199e6(0x1af),'mode':_0x4199e6(0x1c6),'credentials':_0x4199e6(0x1ba),'headers':{'Content-Type':'application/json'},'body':JSON[_0x4199e6(0x1d4)]({'conversation':_0x4690e1,'message':_0x3bee30})});if(!_0x240a40['ok']){let _0x543414;try{_0x543414=await _0x240a40['text']();}catch(_0x5ecfe5){_0x543414=_0x240a40[_0x4199e6(0x1c4)];}a0_0x12bab7(_0x4199e6(0x1a5)+_0x240a40['status']+':\x20'+_0x543414,_0x4199e6(0x195)),a0_0x10795c(_0x4199e6(0x1a3),_0x4199e6(0x1a5)+_0x240a40['status']+':\x20'+_0x543414),a0_0x5af858[_0x4199e6(0x1d1)]=![];return;}const _0x1af353=await _0x240a40['json'](),_0x3e7e50=_0x1af353&&(_0x1af353[_0x4199e6(0x19f)]||_0x1af353[_0x4199e6(0x193)]||_0x1af353[_0x4199e6(0x1db)])||_0x4199e6(0x1d7);a0_0x12bab7(_0x3e7e50,_0x4199e6(0x195)),a0_0x10795c(_0x4199e6(0x1a3),_0x3e7e50);}catch(_0x4a875d){console['error'](_0x4a875d),a0_0x12bab7(_0x4199e6(0x1b9),_0x4199e6(0x195)),a0_0x10795c(_0x4199e6(0x1a3),_0x4199e6(0x1b9));}finally{a0_0x5af858['disabled']=![];}}</script></body></html>
